import{c as I}from"../assets/cash.esm.js";function z(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C={exports:{}};/**
 * findAndReplaceDOMText v 0.4.6
 * @author James Padolsey http://james.padolsey.com
 * @license http://unlicense.org/UNLICENSE
 *
 * Matches the text of a DOM node against a regular expression
 * and replaces each match (or node-separated portions of the match)
 * in the specified element.
 */var G=C.exports,A;function X(){return A||(A=1,function(e){(function(i,o){e.exports?e.exports=o():i.findAndReplaceDOMText=o()})(G,function(){var o="retain",f="first",p=document,h={}.hasOwnProperty;function M(n){return String(n).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function v(){return W.apply(null,arguments)||L.apply(null,arguments)}function W(n,d,a,r,l){if(d&&!d.nodeType&&arguments.length<=2)return!1;var u=typeof a=="function";u&&(a=function(s){return function(c,g){return s(c.text,g.startIndex)}}(a));var t=L(d,{find:n,wrap:u?null:a,replace:u?a:"$"+(r||"&"),prepMatch:function(s,c){if(!s[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(r>0){var g=s[r];s.index+=s[0].indexOf(g),s[0]=g}return s.endIndex=s.index+s[0].length,s.startIndex=s.index,s.index=c,s},filterElements:l});return v.revert=function(){return t.revert()},!0}function L(n,d){return new y(n,d)}v.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},v.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},v.NON_INLINE_PROSE=function(n){return h.call(v.NON_CONTIGUOUS_PROSE_ELEMENTS,n.nodeName.toLowerCase())},v.PRESETS={prose:{forceContext:v.NON_INLINE_PROSE,filterElements:function(n){return!h.call(v.NON_PROSE_ELEMENTS,n.nodeName.toLowerCase())}}},v.Finder=y;function y(n,d){var a=d.preset&&v.PRESETS[d.preset];if(d.portionMode=d.portionMode||o,a)for(var r in a)h.call(a,r)&&!h.call(d,r)&&(d[r]=a[r]);this.node=n,this.options=d,this.prepMatch=d.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return y.prototype={search:function(){var n,d=0,a=0,r=this.options.find,l=this.getAggregateText(),u=[],t=this;r=typeof r=="string"?RegExp(M(r),"g"):r,s(l);function s(c){for(var g=0,E=c.length;g<E;++g){var N=c[g];if(typeof N!="string"){s(N);continue}if(r.global)for(;n=r.exec(N);)u.push(t.prepMatch(n,d++,a));else(n=N.match(r))&&u.push(t.prepMatch(n,0,a));a+=N.length}}return u},prepMatch:function(n,d,a){if(!n[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return n.endIndex=a+n.index+n[0].length,n.startIndex=a+n.index,n.index=d,n},getAggregateText:function(){var n=this.options.filterElements,d=this.options.forceContext;return a(this.node);function a(r){if(r.nodeType===Node.TEXT_NODE)return[r.data];if(n&&!n(r))return[];var l=[""],u=0;if(r=r.firstChild)do{if(r.nodeType===Node.TEXT_NODE){l[u]+=r.data;continue}var t=a(r);d&&r.nodeType===Node.ELEMENT_NODE&&(d===!0||d(r))?(l[++u]=t,l[++u]=""):(typeof t[0]=="string"&&(l[u]+=t.shift()),t.length&&(l[++u]=t,l[++u]=""))}while(r=r.nextSibling);return l}},processMatches:function(){var n=this.matches,d=this.node,a=this.options.filterElements,r,l,u=[],t=d,s=n.shift(),c=0,g=0,E,N=[d];e:for(;;){if(t.nodeType===Node.TEXT_NODE&&(!l&&t.length+c>=s.endIndex?l={node:t,index:g++,text:t.data.substring(s.startIndex-c,s.endIndex-c),indexInMatch:c===0?0:c-s.startIndex,indexInNode:s.startIndex-c,endIndexInNode:s.endIndex-c,isEnd:!0}:r&&u.push({node:t,index:g++,text:t.data,indexInMatch:c-s.startIndex,indexInNode:0}),!r&&t.length+c>s.startIndex&&(r={node:t,index:g++,indexInMatch:0,indexInNode:s.startIndex-c,endIndexInNode:s.endIndex-c,text:t.data.substring(s.startIndex-c,s.endIndex-c)}),c+=t.data.length),E=t.nodeType===Node.ELEMENT_NODE&&a&&!a(t),r&&l){if(t=this.replaceMatch(s,r,u,l),c-=l.node.data.length-l.endIndexInNode,r=null,l=null,u=[],s=n.shift(),g=0,!s)break}else if(!E&&(t.firstChild||t.nextSibling)){t.firstChild?(N.push(t),t=t.firstChild):t=t.nextSibling;continue}for(;;){if(t.nextSibling){t=t.nextSibling;break}if(t=N.pop(),t===d)break e}}},revert:function(){for(var n=this.reverts.length;n--;)this.reverts[n]();this.reverts=[]},prepareReplacementString:function(n,d,a){var r=this.options.portionMode;return r===f&&d.indexInMatch>0?"":(n=n.replace(/\$(\d+|&|`|')/g,function(l,u){var t;switch(u){case"&":t=a[0];break;case"`":t=a.input.substring(0,a.startIndex);break;case"'":t=a.input.substring(a.endIndex);break;default:t=a[+u]||""}return t}),r===f?n:d.isEnd?n.substring(d.indexInMatch):n.substring(d.indexInMatch,d.indexInMatch+d.text.length))},getPortionReplacementNode:function(n,d){var a=this.options.replace||"$&",r=this.options.wrap,l=this.options.wrapClass;if(r&&r.nodeType){var u=p.createElement("div");u.innerHTML=r.outerHTML||new XMLSerializer().serializeToString(r),r=u.firstChild}if(typeof a=="function")return a=a(n,d),a&&a.nodeType?a:p.createTextNode(String(a));var t=typeof r=="string"?p.createElement(r):r;return t&&l&&(t.className=l),a=p.createTextNode(this.prepareReplacementString(a,n,d)),!a.data||!t?a:(t.appendChild(a),t)},replaceMatch:function(n,d,a,r){var l=d.node,u=r.node,t,s;if(l===u){var c=l;d.indexInNode>0&&(t=p.createTextNode(c.data.substring(0,d.indexInNode)),c.parentNode.insertBefore(t,c));var g=this.getPortionReplacementNode(r,n);return c.parentNode.insertBefore(g,c),r.endIndexInNode<c.length&&(s=p.createTextNode(c.data.substring(r.endIndexInNode)),c.parentNode.insertBefore(s,c)),c.parentNode.removeChild(c),this.reverts.push(function(){t===g.previousSibling&&t.parentNode.removeChild(t),s===g.nextSibling&&s.parentNode.removeChild(s),g.parentNode.replaceChild(c,g)}),g}else{t=p.createTextNode(l.data.substring(0,d.indexInNode)),s=p.createTextNode(u.data.substring(r.endIndexInNode));for(var E=this.getPortionReplacementNode(d,n),N=[],_=0,B=a.length;_<B;++_){var S=a[_],D=this.getPortionReplacementNode(S,n);S.node.parentNode.replaceChild(D,S.node),this.reverts.push(function(H,P){return function(){P.parentNode.replaceChild(H.node,P)}}(S,D)),N.push(D)}var O=this.getPortionReplacementNode(r,n);return l.parentNode.insertBefore(t,l),l.parentNode.insertBefore(E,l),l.parentNode.removeChild(l),u.parentNode.insertBefore(O,u),u.parentNode.insertBefore(s,u),u.parentNode.removeChild(u),this.reverts.push(function(){t.parentNode.removeChild(t),E.parentNode.replaceChild(l,E),s.parentNode.removeChild(s),O.parentNode.replaceChild(u,O)}),O}}},v})}(C)),C.exports}var q=X();const k=z(q);let x,J="trump-replace",K="slogan-replace",R=/realdonaldtrump|Trumpworld|donald_trump|donald j. trump|donald john trump|donaldjtrump|donald j. trump|trump(?:\.\w+)?|donald j trump|donald\strump|donaldjtrump|trumps|donaldtrump|\btrump(?='s)|donaldtrump|\b(trump|donald)(\b|(?='s))/gi,Q=/\b(?:make\s+america\s+great\s+again|maga)\b/gi;class U extends Set{update(i){this.forEach(o=>{o.innerHTML=i})}revert(){this.forEach(i=>{i.innerHTML=i.dataset.ogText})}}const j=e=>{let i=I(e).width(),o=I(e).height();if(i<=0||o<=0)return;let f=F(i,o);const p=e.nodeName;p=="SOURCE"?e.srcset&&(e.srcset=f):p=="IMG"?(e.src&&(e.src=f),e.srcset&&(e.srcset=f)):p=="DIV"&&(e.style.backgroundImage=`url('${f}')`)},Y=e=>{const i={attributes:!0};new MutationObserver(function(o,f){f.disconnect(),o.forEach(function(p){j(e)}),f.observe(e,i)}).observe(e,i)};class Z extends Set{add(i){return Y(i),super.add(i)}update(){this.forEach(i=>{j(i)})}revert(){this.forEach(i=>{I(i);const o=i.dataset.oldSrc,f=i.dataset.oldSrcset;i.nodeName==="SOURCE"?f&&(i.srcset=f):i.nodeName==="IMG"?(o&&(i.src=o),f&&(i.srcset=f)):i.nodeName==="DIV"&&o&&(i.style.backgroundImage=o)})}}const T=new U,w=new U,m=new Z;function ee(e){e.nodeName!=="SCRIPT"&&(T.has(e)||(k(e,{preset:"prose",find:R,replace:function(i){const o=V(x.theWord,J);return o.dataset.ogText=i.text,T.add(o),o}}),k(e,{preset:"prose",find:Q,replace:function(i){const o=V(x.theSlogan,K);return o.dataset.ogText=i.text,w.add(o),o}})))}function V(e,i){const o=document.createElement("span"),f=document.createTextNode(e);return o.appendChild(f),o.classList.add(i),o}function te(e){const i=e.nodeName;if(i!=="IMG"&&i!=="DIV"||m.has(e))return;const o=e.offsetWidth,f=e.offsetHeight;if(o<=0||f<=0)return;const p=F(o,f);if(i==="DIV"){const h=e.style.backgroundImage;h&&R.test(h)&&(e.style.backgroundImage=`url('${p}')`,e.dataset.oldSrc=h,m.add(e))}else if(i==="IMG"){let h;if($(I(e),["alt","title","data-title","src","srcset"],R))h=e,I(e).siblings("picture source").each(function(){this.dataset.oldSrcset=this.srcset,this.srcset=p,m.add(this)});else{let M=I(e).closest("a");M&&$(M,["alt","title","href"],R)&&(h=e)}h&&(h.dataset.oldSrc=e.getAttribute("src")||"",I(h).attr("src",p),m.add(h))}}function $(e,i,o){const p=i.map(h=>e.attr(h)).some(h=>h&&o.test(h));return p&&(o.lastIndex=0),p}function F(e,i){return(x.isCustom&&x.customPlaceholderUrl?x.customPlaceholderUrl:x.placeholder).replace("$width",Math.round(e)).replace("$height",Math.round(i))}function b(e){x.paused||(ee(e),x.shouldReplace&&I(e).find("img, div").each(function(){te(this)}))}chrome.storage.onChanged.addListener(function(e,i){var o,f;if(e.paused&&(x.paused=e.paused.newValue,e.paused.newValue?(T.revert(),w.revert(),m.revert()):(b(document.body),T.update(x.theWord),w.update(x.theSlogan),x.shouldReplace&&m.update())),e.theWord){let p=e.theWord.newValue;x.theWord=p,T.update(p)}if(e.theSlogan){let p=e.theSlogan.newValue;x.theSlogan=p,w.update(p)}e.shouldReplace&&(x.shouldReplace=e.shouldReplace.newValue,e.shouldReplace.newValue?(m.update(),b(document.body)):m.revert()),(e.isCustom||e.customPlaceholderUrl)&&(x.isCustom=((o=e.isCustom)==null?void 0:o.newValue)??x.isCustom,x.customPlaceholderUrl=((f=e.customPlaceholderUrl)==null?void 0:f.newValue)??x.customPlaceholderUrl,m.update(),b(document.body))});function re(){new MutationObserver(function(e,i){e.forEach(function(o){o.addedNodes.forEach(function(f){f.nodeType==Node.ELEMENT_NODE&&b(f)})})}).observe(document,{subtree:!0,childList:!0})}I(function(){chrome.storage.sync.get(function(e){x=e,re(),b(document.body)})});
