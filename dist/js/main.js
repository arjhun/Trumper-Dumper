import{c as t}from"../assets/cash.esm.js";import{d as A}from"../assets/default.options.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const L="https://www.google-analytics.com/mp/collect",x="https://www.google-analytics.com/debug/mp/collect",G="G-FTSPB6B2FD",M="xzuw3rC_Q6GGFYMUHiCjYA",U=100,k=30;class R{constructor(e=!1){this.debug=e}async getOrCreateClientId(){let{clientId:e}=await chrome.storage.local.get("clientId");return e||(e=self.crypto.randomUUID(),await chrome.storage.local.set({clientId:e})),e}async getOrCreateSessionId(){let{sessionData:e}=await chrome.storage.session.get("sessionData");const o=Date.now();return e&&e.timestamp&&((o-e.timestamp)/6e4>k?e=null:(e.timestamp=o,await chrome.storage.session.set({sessionData:e}))),e||(e={session_id:o.toString(),timestamp:o},await chrome.storage.session.set({sessionData:e})),e.session_id}async fireEvent(e,o={}){o.session_id||(o.session_id=await this.getOrCreateSessionId()),o.engagement_time_msec||(o.engagement_time_msec=U);try{const a=await fetch(`${this.debug?x:L}?measurement_id=${G}&api_secret=${M}`,{method:"POST",body:JSON.stringify({client_id:await this.getOrCreateClientId(),events:[{name:e,params:o}]})});if(!this.debug)return;console.log(await a.text())}catch(a){console.error("Google Analytics request failed with an exception",a)}}async firePageViewEvent(e,o,a={}){return this.fireEvent("page_view",{page_title:e,page_location:o,...a})}async fireErrorEvent(e,o={}){return this.fireEvent("extension_error",{...e,...o})}}const u=new R;let i;const B="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=JRY7QUL8X4WQS",F="https://buymeacoffee.com/Arjhun";let E,f,b,C,I,P,g,d,y,_,c,w,l,$,D,O,S,N,v;function T(){C.val(i.theWord),I.val(i.theSlogan),P.prop("checked",i.shouldReplace),b.prop("checked",i.isCustom),d.val(i.customPlaceholderUrl),N.attr("title","version: 0.5.1"),i.shouldReplace?g.show():g.hide(),i.isCustom&&d.prop("disabled",!1),i.paused?(t("#container").addClass("isPaused"),c.addClass("glyphicon-play"),c.removeClass("glyphicon-pause"),_.text("Resume Extention"),y.show()):(t("#container").removeClass("isPaused"),c.addClass("glyphicon-pause"),c.removeClass("glyphicon-play"),_.text("Pause Extention"),y.hide()),E=t("form").serialize();const n=Date.now()-i.donateLastChanged;console.log(n),!i.donate&&n>=7*24*60*60*1e3&&chrome.storage.sync.set({donate:!0,donateLastChanged:Date.now()}),i.donate?v.removeAttr("hidden"):v.attr("hidden","")}let m;function h(){m&&clearTimeout(m),w.show(),m=setTimeout(function(){w.hide()},3e3),l.attr("disabled","disabled"),E=f.serialize()}function j(){f=t("#optionform"),b=t("#isCustom"),d=t("#customImage"),C=t("#theword"),I=t("#theSlogan"),P=t("#kittens"),g=t("#customGroup"),y=t("#paused"),_=t("#playPauseText"),c=t("#playPauseIcon"),w=t("#saved"),l=t("#applybtn"),$=t("#playPause"),D=t(".donateButton"),O=t(".coffeeButton"),S=t(".donateDismiss"),v=t("#donate-alert"),N=t("legend").first()}function z(){t(".close").on("click",function(){t(this).parent().hide()}),f.find("input").on("change input",function(){f.serialize()!=E?l.removeAttr("disabled"):l.attr("disabled","disabled")}),D.on("click",function(n){n.preventDefault(),u.fireEvent("donate_url_opened"),chrome.tabs.create({url:B})}),O.on("click",function(n){n.preventDefault(),u.fireEvent("coffee_url_opened"),chrome.tabs.create({url:F})}),S.each(function(){t(this).on("click",function(){chrome.storage.sync.set({donate:!1,donateLastChanged:Date.now()})})}),l.on("click",function(){chrome.storage.sync.set({theWord:C.val(),theSlogan:I.val(),customPlaceholderUrl:d.val()},h)}),$.on("click",function(){chrome.storage.sync.set({paused:!i.paused})}),P.on("click",function(){chrome.storage.sync.set({shouldReplace:t(this).prop("checked")},h)}),b.on("change",function(){chrome.storage.sync.set({isCustom:t(this).prop("checked")},()=>{d.prop("disabled",!i.isCustom),h()})}),t("form").on("submit",function(n){n.preventDefault()})}chrome.storage.sync.get(function(n){i=n,t(function(){console.log("Loaded default settings:",n),u.firePageViewEvent("options_popup",""),j(),T(),z()})});chrome.storage.onChanged.addListener((n,e)=>{let o={};for(const[a,{newValue:s}]of Object.entries(n))s!==void 0&&(i[a]=s,a in A&&(o[a]=s));console.log(n),Object.entries(o).length>0&&(u.fireEvent("options_changed",o),T())});
